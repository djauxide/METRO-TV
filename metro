<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="description" content="Metropolitan TV - Global Live Streaming Platform">
    <title>Metropolitan TV - Live Streaming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hls.js/1.5.4/hls.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background-color: #0a0a0a; color: white; margin: 0; min-height: 100vh; }
        .animate-pulse-live { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        video::-webkit-media-controls { display: none !important; }
    </style>
<base target="_blank">
</head>
<body>
    <div class="min-h-screen bg-[#0a0a0a]">
        <header class="fixed top-0 left-0 right-0 z-40 bg-[#0a0a0a]/95 backdrop-blur-lg border-b border-white/10">
            <div class="flex items-center justify-between px-4 py-3 md:px-6">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-gradient-to-br from-sky-500 to-sky-700 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-lg">M</span>
                    </div>
                    <span class="text-xl font-bold text-white">Metro<span class="text-sky-500">TV</span></span>
                </div>
                <div class="w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full"></div>
            </div>
        </header>

        <main class="pt-16 pb-20">
            <div class="px-4 md:px-6 max-w-7xl mx-auto">
                <div class="sticky top-16 z-30 bg-[#0a0a0a]/95 backdrop-blur-lg py-4">
                    <div class="flex gap-2 overflow-x-auto scrollbar-hide pb-2" id="categoryFilter"></div>
                </div>

                <div class="mb-8">
                    <div class="relative bg-black rounded-xl overflow-hidden aspect-video">
                        <video id="mainVideo" class="w-full h-full object-contain" playsinline></video>
                        <div class="absolute top-4 left-4 flex items-center gap-2 bg-red-600 px-3 py-1 rounded-full">
                            <div class="w-2 h-2 bg-white rounded-full animate-pulse-live"></div>
                            <span class="text-white text-sm font-semibold">LIVE</span>
                        </div>
                        <div class="absolute top-4 right-4 bg-black/60 backdrop-blur-sm px-3 py-1 rounded-full">
                            <span class="text-white text-sm" id="viewerCount">15.4K watching</span>
                        </div>
                        <div class="absolute inset-0 flex items-center justify-center" id="playOverlay">
                            <button onclick="playVideo()" class="w-16 h-16 bg-sky-600/90 rounded-full flex items-center justify-center hover:scale-110 transition-transform">
                                <svg class="w-8 h-8 text-white ml-1" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            </button>
                        </div>
                    </div>
                    <div class="mt-4">
                        <h1 class="text-2xl font-bold text-white" id="channelName">Metro News 24</h1>
                        <p class="text-gray-400 mt-1" id="channelDesc">24/7 breaking news and current affairs from across the United States</p>
                    </div>
                </div>

                <div id="channelsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"></div>
            </div>
        </main>
    </div>

    <script>
        const channels = [
            { id: 'metro-news-us', name: 'Metro News 24', description: '24/7 breaking news and current affairs from across the United States', logo: 'https://images.unsplash.com/photo-1495020689067-958852a7765e?w=400&h=300&fit=crop', category: 'news', language: 'English', country: 'USA', streamUrl: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8', viewerCount: 15420 },
            { id: 'sports-central-uk', name: 'Sports Central', description: 'Premier sports coverage from the UK and around the world', logo: 'https://images.unsplash.com/photo-1461896836934-1532487502-434ff70b5fb0?w=400&h=300&fit=crop', category: 'sports', language: 'English', country: 'UK', streamUrl: 'https://test-streams.mux.dev/test_001/stream.m3u8', viewerCount: 23100 },
            { id: 'cinema-world-fr', name: 'Cinema World', description: 'International cinema and film culture from France', logo: 'https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?w=400&h=300&fit=crop', category: 'movies', language: 'Multi-language', country: 'France', streamUrl: 'https://test-streams.mux.dev/dai-discontinuity-deltatre/manifest.m3u8', viewerCount: 8900 },
            { id: 'bollywood-express-in', name: 'Bollywood Express', description: 'Latest Bollywood movies, music, and entertainment from India', logo: 'https://images.unsplash.com/photo-1536440136628-849c177e76a1?w=400&h=300&fit=crop', category: 'entertainment', language: 'Hindi', country: 'India', streamUrl: 'https://test-streams.mux.dev/tos_ismc/main.m3u8', viewerCount: 45600 },
            { id: 'anime-zone-jp', name: 'Anime Zone', description: 'Latest anime series and classics from Japan', logo: 'https://images.unsplash.com/photo-1578632767115-351597cf2477?w=400&h=300&fit=crop', category: 'entertainment', language: 'Japanese', country: 'Japan', streamUrl: 'https://test-streams.mux.dev/dai-discontinuity-deltatre/manifest.m3u8', viewerCount: 32100 },
            { id: 'latino-vision-mx', name: 'Latino Vision', description: 'Spanish-language entertainment and news for Latin America', logo: 'https://images.unsplash.com/photo-1518105779142-d975f22f1b0a?w=400&h=300&fit=crop', category: 'entertainment', language: 'Spanish', country: 'Mexico', streamUrl: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8', viewerCount: 18900 },
            { id: 'kpop-tv-kr', name: 'K-Pop TV', description: 'Korean pop music, variety shows, and entertainment', logo: 'https://images.unsplash.com/photo-1493225255756-d9584f8606e9?w=400&h=300&fit=crop', category: 'music', language: 'Korean', country: 'South Korea', streamUrl: 'https://test-streams.mux.dev/test_001/stream.m3u8', viewerCount: 41200 },
            { id: 'documentary-plus-de', name: 'Documentary+', description: 'Award-winning documentaries from Germany and beyond', logo: 'https://images.unsplash.com/photo-1440404653325-ab127d49abc1?w=400&h=300&fit=crop', category: 'documentary', language: 'English', country: 'Germany', streamUrl: 'https://test-streams.mux.dev/tos_ismc/main.m3u8', viewerCount: 12300 }
        ];

        const categories = [
            { id: 'all', label: 'All' },
            { id: 'news', label: 'News' },
            { id: 'sports', label: 'Sports' },
            { id: 'movies', label: 'Movies' },
            { id: 'entertainment', label: 'Entertainment' },
            { id: 'music', label: 'Music' },
            { id: 'documentary', label: 'Documentary' }
        ];

        let currentChannel = channels[0];
        let hls = null;

        function init() {
            renderCategories();
            renderChannels();
        }

        function renderCategories() {
            const container = document.getElementById('categoryFilter');
            container.innerHTML = categories.map((cat, idx) => `
                <button onclick="filterChannels('${cat.id}', ${idx})" 
                    class="cat-btn flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap transition-all duration-200 font-medium text-sm ${idx === 0 ? 'bg-sky-600 text-white' : 'bg-[#1a1a1a] text-gray-400 hover:bg-[#2a2a2a] hover:text-white'}">
                    ${cat.label}
                </button>
            `).join('');
        }

        function renderChannels(filter = 'all') {
            const container = document.getElementById('channelsGrid');
            const filtered = filter === 'all' ? channels : channels.filter(c => c.category === filter);
            container.innerHTML = filtered.map(channel => `
                <div onclick="loadChannel('${channel.id}')" class="group cursor-pointer rounded-xl overflow-hidden bg-[#1a1a1a] hover:ring-2 hover:ring-sky-500/50 transition-all">
                    <div class="relative aspect-video">
                        <img src="${channel.logo}" alt="${channel.name}" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors"></div>
                        <div class="absolute top-3 left-3 flex items-center gap-1.5 bg-red-600 px-2 py-1 rounded-full">
                            <div class="w-1.5 h-1.5 bg-white rounded-full animate-pulse-live"></div>
                            <span class="text-white text-xs font-bold">LIVE</span>
                        </div>
                        <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                            <div class="w-12 h-12 bg-sky-600/90 rounded-full flex items-center justify-center">
                                <svg class="w-6 h-6 text-white ml-0.5" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            </div>
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-white mb-1 line-clamp-1">${channel.name}</h3>
                        <p class="text-sm text-gray-400 line-clamp-1">${channel.description}</p>
                        <div class="flex items-center gap-3 mt-3 text-xs text-gray-500">
                            <span class="px-2 py-0.5 bg-[#2a2a2a] rounded-full text-gray-300">${channel.category}</span>
                            <span>${formatViewerCount(channel.viewerCount)}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterChannels(category, idx) {
            renderChannels(category);
            document.querySelectorAll('.cat-btn').forEach((btn, i) => {
                btn.className = `cat-btn flex items-center gap-2 px-4 py-2 rounded-full whitespace-nowrap transition-all duration-200 font-medium text-sm ${i === idx ? 'bg-sky-600 text-white' : 'bg-[#1a1a1a] text-gray-400 hover:bg-[#2a2a2a] hover:text-white'}`;
            });
        }

        function loadChannel(channelId) {
            const channel = channels.find(c => c.id === channelId);
            currentChannel = channel;
            document.getElementById('channelName').textContent = channel.name;
            document.getElementById('channelDesc').textContent = channel.description;
            document.getElementById('viewerCount').textContent = formatViewerCount(channel.viewerCount) + ' watching';
            if (hls) { hls.destroy(); hls = null; }
            document.getElementById('playOverlay').style.display = 'flex';
            document.getElementById('mainVideo').pause();
        }

        function playVideo() {
            const video = document.getElementById('mainVideo');
            document.getElementById('playOverlay').style.display = 'none';
            if (Hls.isSupported()) {
                hls = new Hls({ enableWorker: true, lowLatencyMode: true });
                hls.loadSource(currentChannel.streamUrl);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = currentChannel.streamUrl;
                video.addEventListener('loadedmetadata', () => video.play());
            }
        }

        function formatViewerCount(count) {
            if (count >= 1000000) return (count / 1000000).toFixed(1) + 'M';
            if (count >= 1000) return (count / 1000).toFixed(1) + 'K';
            return count.toString();
        }

        window.addEventListener('load', init);
    </script>
</body>
</html>
